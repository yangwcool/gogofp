<!DOCTYPE html>
<html lang="zh">

<head>
  <meta charset="utf-8">
  <meta content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
  <title> gogofp - ajax </title>
  <link rel="stylesheet" href="main.css" />
</head>

<body>
  <div class="banner">
    <div class="banner-1">
        <label><input type="radio" name="engine" value="baidu">百度</label>
        <label><input type="radio" name="engine" value="doge">多吉</label>
        <label><input type="radio" name="engine" value="zhihu">知乎</label>
        <label><input type="radio" name="engine" value="bing" checked="checked">必应</label>
        <label><input type="radio" name="engine" value="google">Google</label>
        <label><input type="radio" name="engine" value="miji">秘迹</label>
    </div>
    <div class="banner-2">
      <form class="searchForm" action="https://cn.bing.com/search" method="get" target="_blank">
        <span class="search-logo">👑</span>
        <input class="search-bar" type="text" name="q">
        <input class="search-btn" type="submit" value="Go!">
    </form>
    </div>
    <div class="banner-3"></div>
  </div>
  <div class="main clearfix">
    <div id="url" class="main-left clearfix">
      <ul><!-- fill by function renderUrl --></ul>
    </div>
    <div class="main-right-1 clearfix">
      <div class="date">
        <p></p>
        <p></p>
      </div>
      <div class="weather">
        <p></p>
        <p></p>
        <p></p>
      </div>
    </div>
    <div class="main-right-2">
      <form class="fyForm" action="https://cn.bing.com/dict/search" method="GET" target="_blank">
        <span>📘</span>
        <input type="text" class="fyWord" name="q">
        <input class="fy-btn" type="submit" value="dic">
      </form>
    </div>


  </div>
  <div class="foot">
    <div class="foot-main">
      <p>😎 created at 2021/4/18 16:15</p>
      <p>😃 updated at 2022/1/14 12:15</p>
    </div>
  </div>

  <script>
    const XHR = new XMLHttpRequest();//第一步：建立所需的对象
    XHR.open('GET', 'dataWebsite.json', true);//第二步：打开连接  将请求参数写在url中  ps:"./Ptest.php?name=test&nameone=testone"
    XHR.send();//第三步：发送请求  将请求参数写在URL中

    // 解析json
    XHR.onreadystatechange = function () {
      if (XHR.readyState == 4 && XHR.status == 200) {
        let json = XHR.responseText;//获取到json字符串，还需解析
        let data = JSON.parse(json);
        
        //请求成功后渲染json
        let websites = data.websites;//json对象转换为数组
        websites.forEach(renderUrl);//forEach方法将渲染函数作为参数
      }
    };

  //渲染函数
  function renderUrl(value){
      let title = value.title;
      let url = value.url;
      document.querySelector('#url>ul').innerHTML += `<li><a href=${url} target="_blank">${title}</a></li>`
  }
</script>

  <script src="main.js"></script>
</body>

</html>
